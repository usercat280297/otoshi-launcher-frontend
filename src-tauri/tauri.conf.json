{
  "$schema": "https://schema.tauri.app/config/2",
  "productName": "Otoshi Launcher",
  "version": "1.0.0",
  "identifier": "com.otoshi.launcher",
  "build": {
    "beforeDevCommand": "npm run dev",
    "beforeBuildCommand": "npm run build",
    "devUrl": "http://localhost:5173",
    "frontendDist": "../dist"
  },
  "app": {
    "withGlobalTauri": true,
    "security": {
      "csp": "default-src 'self'; connect-src 'self' ipc: http://ipc.localhost http://localhost:8000 http://127.0.0.1:8000 http://localhost:8001 http://127.0.0.1:8001 http://localhost:5173 http://127.0.0.1:5173 ws://localhost:5173 ws://127.0.0.1:5173 https://otoshi-launcher-backend.onrender.com https://video.akamai.steamstatic.com https://*.akamaihd.net https://steamcdn-a.akamaihd.net https://cdn.cloudflare.steamstatic.com; img-src 'self' https: http://localhost:8000 http://127.0.0.1:8000 http://localhost:8001 http://127.0.0.1:8001 data: blob:; media-src 'self' https: blob: data:; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; style-src-elem 'self' 'unsafe-inline' https://fonts.googleapis.com",
      "capabilities": [
        {
          "identifier": "main-window-controls",
          "description": "Allow basic window controls (min/max/close) and dragging for the frameless window.",
          "windows": [
            "*"
          ],
          "permissions": [
            "core:window:allow-close",
            "core:window:allow-is-maximized",
            "core:window:allow-maximize",
            "core:window:allow-minimize",
            "core:window:allow-start-dragging",
            "core:window:allow-unmaximize"
          ]
        },
        {
          "identifier": "dialog-access",
          "description": "Allow folder picker for download location selection.",
          "windows": [
            "*"
          ],
          "permissions": [
            "dialog:allow-open"
          ]
        },
        {
          "identifier": "shell-access",
          "description": "Allow opening external URLs in default browser.",
          "windows": [
            "*"
          ],
          "permissions": [
            "shell:allow-open"
          ]
        },
        {
          "identifier": "deep-link-access",
          "description": "Allow registering and handling deep links for OAuth.",
          "windows": [
            "*"
          ],
          "permissions": [
            "deep-link:default"
          ]
        },
        {
          "identifier": "event-access",
          "description": "Allow emitting and listening to events.",
          "windows": [
            "*"
          ],
          "permissions": [
            "core:event:default"
          ]
        }
      ]
    },
    "windows": [
      {
        "title": "Otoshi Launcher",
        "width": 1280,
        "height": 720,
        "maximized": true,
        "minWidth": 1024,
        "minHeight": 600,
        "resizable": true,
        "fullscreen": false,
        "decorations": false,
        "transparent": false,
        "visible": false
      }
    ]
  },
  "bundle": {
    "active": true,
    "targets": [
      "nsis"
    ],
    "icon": [
      "icons/icon.png",
      "icons/icon.ico"
    ],
    "windows": {
      "nsis": {
        "installerIcon": "icons/icon.ico",
        "headerImage": "icons/installer/nsis-header.bmp",
        "sidebarImage": "icons/installer/nsis-sidebar.bmp",
        "startMenuFolder": "Otoshi Launcher",
        "compression": "lzma",
        "installMode": "currentUser"
      },
      "wix": {
        "bannerPath": "icons/installer/wix-banner.bmp",
        "dialogImagePath": "icons/installer/wix-dialog.bmp"
      }
    },
    "resources": {
      "resources/backend": "backend"
    }
  },
  "plugins": {
    "updater": {
      "active": false,
      "dialog": true,
      "endpoints": [],
      "pubkey": ""
    },
    "deep-link": {
      "desktop": {
        "schemes": ["otoshi"]
      }
    }
  }
}
